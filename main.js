(()=>{"use strict";const e=document.getElementById("curr-weather"),t=[1,2,3],n=[45,48],c=[51,53,55,56,57,61,63,65,66,67,80,81,82],o=[71,73,75,77,85,86],a=[95,96,99,"*"];async function r(r){const i=await fetch(`https://geocoding-api.open-meteo.com/v1/search?name=${r}&count=1&language=it&format=json`),s=await i.json();!async function(e){const t=document.getElementById("location-name"),n=document.getElementById("location-country");let c=e.results[0].admin1;c||(c=""),t.textContent=e.results[0].name,n.textContent=`${c} ${e.results[0].country}`}(s),async function(r){const i=r.results[0].latitude,s=r.results[0].longitude;await async function(r,i){const s=await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${r}&longitude=${i}&hourly=temperature_2m,apparent_temperature,relativehumidity_2m&daily=temperature_2m_max,temperature_2m_min,precipitation_probability_max,windspeed_10m_max&current_weather=true&timezone=auto`),u=await s.json();return console.log(u),async function(t){const n=document.getElementById("curr-date");n.textContent="";const c=document.createElement("img"),o=document.createElement("h2");c.src="icons/calendar.png",o.textContent=function(e){const t=e.split("-")[2],n=e.split("-")[1],c=e.split("-")[0];return`${t[0]}${t[1]}/${n}/${c}`}(t.current_weather.time),n.appendChild(c),n.appendChild(o),e.appendChild(n)}(u),async function(t){const n=document.getElementById("curr-temp");n.textContent="";const c=document.createElement("h2"),o=document.createElement("img");o.src="icons/thermostat.png",c.textContent=t.current_weather.temperature+" Â°C",n.appendChild(o),n.appendChild(c),e.appendChild(n)}(u),async function(r){const i=document.getElementById("curr-temp"),s=document.createElement("img");let u=await r.current_weather.weathercode,d=await r.current_weather.is_day;0==u&&0==d?s.src="icons/night.png":t.includes(u)&&1==d?s.src="icons/cloudyDay.png":t.includes(u)&&0==d?s.src="icons/cloudyNight.png":n.includes(u)?s.src="icons/foggy.png":c.includes(u)?s.src="icons/rainy.png":o.includes(u)?s.src="icons/snowy.png":a.includes(u)&&(s.src="icons/thunderstorm.png"),i.appendChild(s),e.appendChild(i)}(u),async function(e){let t=e.current_weather.time.split("T");console.log(t[1])}(u),u}(i,s)}(s)}const i=document.getElementById("location"),s=document.getElementById("search");i.addEventListener("keypress",(e=>{"Enter"==e.key&&(r(i.value),i.value="")})),s.addEventListener("click",(()=>{r(i.value),i.value=""}))})();