(()=>{"use strict";function t(t){const e=t.current_weather.time.split("T")[1].split(":")[0];return"00"===e?"24":"0"===e[0]?e[1]:e}async function e(e,a){const u=await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${e}&longitude=${a}&hourly=temperature_2m,apparent_temperature,relativehumidity_2m&daily=temperature_2m_max,temperature_2m_min,precipitation_probability_max,windspeed_10m_max&current_weather=true&timezone=auto`),d=await u.json();var l,m;return async function(t){const e=document.getElementById("curr-date");e.textContent="";const o=document.createElement("img"),c=document.createElement("h3");o.src="icons/calendar.png",c.textContent=function(t){const e=t.split("-")[2],n=t.split("-")[1],o=t.split("-")[0];return`${e[0]}${e[1]}/${n}/${o}`}(t.current_weather.time),e.appendChild(o),e.appendChild(c),n.appendChild(e)}(d),async function(t){const e=document.getElementById("curr-temp"),a=document.createElement("img"),u=document.createElement("h2");let d=await t.current_weather.weathercode,l=await t.current_weather.is_day;0===d&&1===l?(u.textContent="Clear Sky",a.src="icons/sunny.svg"):0===d&&0===l?(u.textContent="Clear Sky",a.src="icons/night.svg"):o.includes(d)&&1===l?(u.textContent="Scattered Clouds",a.src="icons/cloudyDay.svg"):o.includes(d)&&0===l?(u.textContent="Scattered Clouds",a.src="icons/cloudyNight.svg"):c.includes(d)?(u.textContent="Foggy",a.src="icons/foggy.svg"):i.includes(d)?(u.textContent="Rainy",a.src="icons/rainy.svg"):r.includes(d)?(u.textContent="Snowy",a.src="icons/snowy.svg"):s.includes(d)&&(u.textContent="Thunderstorm",a.src="icons/thunderstorm.svg"),e.appendChild(u),e.appendChild(a),n.appendChild(e)}(d),function(t){const e=document.getElementById("curr-temp");e.textContent="";const o=document.createElement("h1");o.id="temp-celsius",o.textContent=t.current_weather.temperature+" °C",e.appendChild(o),n.appendChild(e)}(d),l=t(d),m=d,document.getElementById("feels-like").textContent=`${m.hourly.apparent_temperature[l]} °C`,function(t){const e=document.getElementById("wind-speed");let n=t.current_weather.windspeed;e.textContent=`${n} Km/h`}(d),function(t){document.getElementById("rain-prob").textContent=`${t.daily.precipitation_probability_max[0]} %`}(d),function(t,e){document.getElementById("humidity").textContent=`${e.hourly.relativehumidity_2m[t]} %`}(t(d),d),function(t){document.getElementById("max-temp").textContent=`${t.daily.temperature_2m_max[0]} °C`}(d),function(t){document.getElementById("min-temp").textContent=`${t.daily.temperature_2m_min[0]} °C`}(d),console.log(d),d}const n=document.getElementById("curr-weather"),o=[1,2,3],c=[45,48],i=[51,53,55,56,57,61,63,65,66,67,80,81,82],r=[71,73,75,77,85,86],s=[95,96,99,"*"];e(45.7,9.66);const a=document.getElementById("err-text");async function u(t){const n=await fetch(`https://geocoding-api.open-meteo.com/v1/search?name=${t}&count=1&language=it&format=json`),o=await n.json();return o.results||(a.textContent="Location Not Found"),async function(t){const n=t.results[0].latitude,o=t.results[0].longitude;await e(n,o)}(o),async function(t){const e=document.getElementById("location-name"),n=document.getElementById("location-region"),o=document.getElementById("location-country");let c=t.results[0].admin1;c||(c=""),e.textContent=t.results[0].name,n.textContent=c,o.textContent=t.results[0].country}(o),o}function d(t){return(9*t/5+32).toString().substring(0,4)}u("Bergamo");const l=document.getElementById("location"),m=document.getElementById("search"),p=document.getElementById("err-text"),y=document.getElementById("imperial");l.addEventListener("keypress",(t=>{const e=l.value;"Enter"===t.key&&(""===e?p.textContent="Invalid input":(u(e),l.value="",p.textContent=""))})),m.addEventListener("click",(()=>{const t=l.value;""===t?p.textContent="Invalid Input":(u(t),l.value="",p.textContent="")})),y.addEventListener("click",(t=>{"Imperial"===y.textContent?(y.textContent="Metric",async function(){const t=document.getElementById("temp-celsius"),e=document.getElementById("feels-like");let n=t.textContent.split(" °C"),o=e.textContent.split(" °C")[0];console.log(o),t.textContent=d(n[0])+" °F",e.textContent=d(o)+" °F"}()):(y.textContent="Imperial",async function(){const t=document.getElementById("temp-celsius"),e=t.textContent.split(" °F");t.textContent=function(t){const e=5*(t-32)/9;return console.log(e),e.toString().substring(0,4)}(e[0])+" °C"}())}))})();