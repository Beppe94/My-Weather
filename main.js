(()=>{"use strict";async function t(t,r){const i=await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${t}&longitude=${r}&hourly=temperature_2m,apparent_temperature,relativehumidity_2m&daily=temperature_2m_max,temperature_2m_min,precipitation_probability_max,windspeed_10m_max&current_weather=true&timezone=auto`),u=await i.json();console.log(u),async function(t){const n=document.getElementById("curr-date");n.textContent="";const o=document.createElement("img"),c=document.createElement("h3");o.src="icons/calendar.png",c.textContent=function(t){const e=t.split("-")[2],n=t.split("-")[1],o=t.split("-")[0];return`${e[0]}${e[1]}/${n}/${o}`}(t.current_weather.time),n.appendChild(o),n.appendChild(c),e.appendChild(n)}(u),async function(t){const r=document.getElementById("curr-temp"),i=document.createElement("img"),u=document.createElement("h2");let d=await t.current_weather.weathercode,l=await t.current_weather.is_day;0===d&&1===l?(u.textContent="Clear Sky",i.src="icons/sunny.svg"):0===d&&0===l?(u.textContent="Clear Sky",i.src="icons/night.svg"):n.includes(d)&&1===l?(u.textContent="Scattered Clouds",i.src="icons/cloudyDay.svg"):n.includes(d)&&0===l?(u.textContent="Scattered Clouds",i.src="icons/cloudyNight.svg"):o.includes(d)?(u.textContent="Foggy",i.src="icons/foggy.svg"):c.includes(d)?(u.textContent="Rainy",i.src="icons/rainy.svg"):a.includes(d)?(u.textContent="Snowy",i.src="icons/snowy.svg"):s.includes(d)&&(u.textContent="Thunderstorm",i.src="icons/thunderstorm.svg"),r.appendChild(u),r.appendChild(i),e.appendChild(r)}(u),async function(t){const n=document.getElementById("curr-temp");n.textContent="";const o=document.createElement("h1");o.textContent=await t.current_weather.temperature+" Â°C",n.appendChild(o),e.appendChild(n)}(u),async function(t){let e=(await t.current_weather.time).split("T");console.log(e[1])}(u)}const e=document.getElementById("curr-weather"),n=[1,2,3],o=[45,48],c=[51,53,55,56,57,61,63,65,66,67,80,81,82],a=[71,73,75,77,85,86],s=[95,96,99,"*"];async function r(e){const n=await fetch(`https://geocoding-api.open-meteo.com/v1/search?name=${e}&count=1&language=it&format=json`),o=await n.json();!async function(t){const e=document.getElementById("location-name"),n=document.getElementById("location-region"),o=document.getElementById("location-country");let c=t.results[0].admin1;c||(c=""),e.textContent=t.results[0].name,n.textContent=c,o.textContent=t.results[0].country}(o),async function(e){const n=e.results[0].latitude,o=e.results[0].longitude;await t(n,o)}(o)}t(45.7,9.66),r("bergamo");const i=document.getElementById("location"),u=document.getElementById("search"),d=document.getElementById("err-text");i.addEventListener("keypress",(t=>{const e=i.value;"Enter"===t.key&&(""===e?d.textContent="Invalid input":(r(e),i.value="",d.textContent=""))})),u.addEventListener("click",(()=>{r(i.value),i.value=""}))})();