(()=>{"use strict";const e=document.getElementById("curr-weather"),t=[1,2,3],n=[45,48],c=[51,53,55,56,57,61,63,65,66,67,80,81,82],o=[71,73,75,77,85,86],a=[95,96,99,"*"];async function i(i){const r=await fetch(`https://geocoding-api.open-meteo.com/v1/search?name=${i}&count=1&language=it&format=json`),s=await r.json();!async function(e){const t=document.getElementById("location-name"),n=document.getElementById("location-country");let c=e.results[0].admin1;c||(c=""),t.textContent=e.results[0].name,n.textContent=`${c} ${e.results[0].country}`}(s),async function(i){const r=i.results[0].latitude,s=i.results[0].longitude;await async function(i,r){const s=await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${i}0&longitude=${r}&hourly=temperature_2m,relativehumidity_2m,apparent_temperature,precipitation_probability,precipitation,rain,snowfall,windspeed_10m&current_weather=true`),d=await s.json();return console.log(d),async function(t){const n=document.getElementById("curr-date");n.textContent="";const c=document.createElement("img"),o=document.createElement("h2");c.src="icons/calendar.png",o.textContent=function(e){const t=e.split("-")[2],n=e.split("-")[1],c=e.split("-")[0];return`${t[0]}${t[1]}/${n}/${c}`}(t.current_weather.time),n.appendChild(c),n.appendChild(o),e.appendChild(n)}(d),async function(t){const n=document.getElementById("curr-temp");n.textContent="";const c=document.createElement("h2"),o=document.createElement("img");o.src="icons/thermostat.png",c.textContent=t.current_weather.temperature+" Â°C",n.appendChild(o),n.appendChild(c),e.appendChild(n)}(d),async function(i){const r=document.getElementById("curr-temp"),s=document.createElement("img");let d=await i.current_weather.weathercode,u=await i.current_weather.is_day;0==d&&0==u?s.src="icons/night.png":t.includes(d)&&1==u?s.src="icons/cloudyDay.png":t.includes(d)&&0==u?s.src="icons/cloudyNight.png":n.includes(d)?s.src="icons/foggy.png":c.includes(d)?s.src="icons/rainy.png":o.includes(d)?s.src="icons/snowy.png":a.includes(d)&&(s.src="icons/thunderstorm.png"),r.appendChild(s),e.appendChild(r),console.log(d,u)}(d),d}(r,s)}(s)}const r=document.getElementById("location"),s=document.getElementById("search");r.addEventListener("keypress",(e=>{"Enter"==e.key&&i(r.value)})),s.addEventListener("click",(()=>{i(r.value)}))})();