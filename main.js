(()=>{"use strict";function t(t){const e=t.current_weather.time.split("T")[1].split(":")[0];return"00"===e?"24":"0"===e[0]?e[1]:e}async function e(e,u){const d=await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${e}&longitude=${u}&hourly=temperature_2m,apparent_temperature,relativehumidity_2m&daily=temperature_2m_max,temperature_2m_min,precipitation_probability_max,windspeed_10m_max&current_weather=true&timezone=auto`),s=await d.json();var m,l;console.log(s),async function(t){const e=document.getElementById("curr-date");e.textContent="";const o=document.createElement("img"),c=document.createElement("h3");o.src="icons/calendar.png",c.textContent=function(t){const e=t.split("-")[2],n=t.split("-")[1],o=t.split("-")[0];return`${e[0]}${e[1]}/${n}/${o}`}(t.current_weather.time),e.appendChild(o),e.appendChild(c),n.appendChild(e)}(s),async function(t){const e=document.getElementById("curr-temp"),u=document.createElement("img"),d=document.createElement("h2");let s=await t.current_weather.weathercode,m=await t.current_weather.is_day;0===s&&1===m?(d.textContent="Clear Sky",u.src="icons/sunny.svg"):0===s&&0===m?(d.textContent="Clear Sky",u.src="icons/night.svg"):o.includes(s)&&1===m?(d.textContent="Scattered Clouds",u.src="icons/cloudyDay.svg"):o.includes(s)&&0===m?(d.textContent="Scattered Clouds",u.src="icons/cloudyNight.svg"):c.includes(s)?(d.textContent="Foggy",u.src="icons/foggy.svg"):r.includes(s)?(d.textContent="Rainy",u.src="icons/rainy.svg"):a.includes(s)?(d.textContent="Snowy",u.src="icons/snowy.svg"):i.includes(s)&&(d.textContent="Thunderstorm",u.src="icons/thunderstorm.svg"),e.appendChild(d),e.appendChild(u),n.appendChild(e)}(s),function(t){const e=document.getElementById("curr-temp");e.textContent="";const o=document.createElement("h1");o.textContent=t.current_weather.temperature+" 째C",e.appendChild(o),n.appendChild(e)}(s),m=t(s),l=s,document.getElementById("feels-like").textContent=`${l.hourly.apparent_temperature[m]} 째C`,function(t){const e=document.getElementById("wind-speed");let n=t.current_weather.windspeed;e.textContent=`${n} Km/h`}(s),function(t){document.getElementById("rain-prob").textContent=`${t.daily.precipitation_probability_max[0]} %`}(s),function(t,e){document.getElementById("humidity").textContent=`${e.hourly.relativehumidity_2m[t]} %`}(t(s),s),function(t){document.getElementById("max-temp").textContent=`${t.daily.temperature_2m_max[0]} 째C`}(s),function(t){document.getElementById("min-temp").textContent=`${t.daily.temperature_2m_min[0]} 째C`}(s)}const n=document.getElementById("curr-weather"),o=[1,2,3],c=[45,48],r=[51,53,55,56,57,61,63,65,66,67,80,81,82],a=[71,73,75,77,85,86],i=[95,96,99,"*"];e(45.7,9.66);const u=document.getElementById("err-text");async function d(t){const n=await fetch(`https://geocoding-api.open-meteo.com/v1/search?name=${t}&count=1&language=it&format=json`),o=await n.json();o.results||(u.textContent="Location Not Found"),async function(t){const n=t.results[0].latitude,o=t.results[0].longitude;await e(n,o)}(o),async function(t){const e=document.getElementById("location-name"),n=document.getElementById("location-region"),o=document.getElementById("location-country");let c=t.results[0].admin1;c||(c=""),e.textContent=t.results[0].name,n.textContent=c,o.textContent=t.results[0].country}(o)}d("Bergamo");const s=document.getElementById("location"),m=document.getElementById("search"),l=document.getElementById("err-text");s.addEventListener("keypress",(t=>{const e=s.value;"Enter"===t.key&&(""===e?l.textContent="Invalid input":(d(e),s.value="",l.textContent=""))})),m.addEventListener("click",(()=>{const t=s.value;""===t?l.textContent="Invalid Input":(d(t),s.value="",l.textContent="")}))})();