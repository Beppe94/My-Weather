(()=>{"use strict";const t=[1,2,3],e=[45,48],n=[51,53,55,56,57,61,63,65,66,67,80,81,82],o=[71,73,75,77,85,86],c=[95,96,99,"*"];function d(d){let i;return 0===d?i="icons/sunny.svg":t.includes(d)?i="icons/cloudyDay.svg":e.includes(d)?i="icons/foggy.svg":n.includes(d)?i="icons/rainy.svg":o.includes(d)?i="icons/snowy.svg":c.includes(d)&&(i="icons/thunderstorm.svg"),i}function i(t){const e=t.current_weather.time.split("T")[1].split(":")[0];return"00"===e?"24":"0"===e[0]?e[1]:e}async function m(t,e){const n=await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${t}&longitude=${e}&hourly=apparent_temperature,relativehumidity_2m&daily=weathercode,temperature_2m_max,temperature_2m_min,precipitation_probability_max,windspeed_10m_max&current_weather=true&timezone=auto`),o=await n.json();var c,m;return async function(t){const e=document.getElementById("curr-date");e.textContent="";const n=document.createElement("img"),o=document.createElement("h3");n.src="icons/calendar.png",o.textContent=l(t.current_weather.time),e.appendChild(n),e.appendChild(o),a.appendChild(e)}(o),async function(t){const e=document.getElementById("curr-temp"),n=document.createElement("img"),o=document.createElement("h2");let c=await t.current_weather.weathercode,d=await t.current_weather.is_day;0===c&&1===d?(o.textContent="Clear Sky",n.src="icons/sunny.svg"):0===c&&0===d?(o.textContent="Clear Sky",n.src="icons/night.svg"):u.includes(c)&&1===d?(o.textContent="Scattered Clouds",n.src="icons/cloudyDay.svg"):u.includes(c)&&0===d?(o.textContent="Scattered Clouds",n.src="icons/cloudyNight.svg"):r.includes(c)?(o.textContent="Foggy",n.src="icons/foggy.svg"):s.includes(c)?(o.textContent="Rainy",n.src="icons/rainy.svg"):p.includes(c)?(o.textContent="Snowy",n.src="icons/snowy.svg"):C.includes(c)&&(o.textContent="Thunderstorm",n.src="icons/thunderstorm.svg"),e.appendChild(o),e.appendChild(n),a.appendChild(e)}(o),function(t){const e=document.getElementById("curr-temp");e.textContent="";const n=document.createElement("h1");n.id="temp-celsius",n.textContent=t.current_weather.temperature+" °C",e.appendChild(n),a.appendChild(e)}(o),c=i(o),m=o,document.getElementById("feels-like").textContent=`${m.hourly.apparent_temperature[c]} °C`,function(t){const e=document.getElementById("wind-speed");let n=t.current_weather.windspeed;e.textContent=`${n} Km/h`}(o),function(t){document.getElementById("rain-prob").textContent=`${t.daily.precipitation_probability_max[0]} %`}(o),function(t,e){document.getElementById("humidity").textContent=`${e.hourly.relativehumidity_2m[t]} %`}(i(o),o),function(t){document.getElementById("max-temp").textContent=`${t.daily.temperature_2m_max[0]} °C`}(o),function(t){document.getElementById("min-temp").textContent=`${t.daily.temperature_2m_min[0]} °C`}(o),async function(t){const e=await t.daily.temperature_2m_max,n=await t.daily.temperature_2m_min,o=await t.daily.time,c=await t.daily.weathercode;!function(t,e,n,o){const c=document.getElementById("day-2"),i=document.createElement("h4"),m=document.createElement("h2"),a=document.createElement("h3"),u=document.createElement("img");i.textContent=l(t[1]),m.textContent=e[1]+" °C",a.textContent=n[1]+" °C",u.src=d(o[1]),c.appendChild(i),c.appendChild(m),c.appendChild(a),c.appendChild(u)}(o,e,n,c),function(t,e,n,o){const c=document.getElementById("day-3"),i=document.createElement("h4"),m=document.createElement("h2"),a=document.createElement("h3"),u=document.createElement("img");i.textContent=l(t[2]),m.textContent=e[2]+" °C",a.textContent=n[2]+" °C",u.src=d(o[2]),c.appendChild(i),c.appendChild(m),c.appendChild(a),c.appendChild(u)}(o,e,n,c),function(t,e,n,o){const c=document.getElementById("day-4"),i=document.createElement("h4"),m=document.createElement("h2"),a=document.createElement("h3"),u=document.createElement("img");i.textContent=l(t[3]),m.textContent=e[3]+" °C",a.textContent=n[3]+" °C",u.src=d(o[3]),c.appendChild(i),c.appendChild(m),c.appendChild(a),c.appendChild(u)}(o,e,n,c),function(t,e,n,o){const c=document.getElementById("day-5"),i=document.createElement("h4"),m=document.createElement("h2"),a=document.createElement("h3"),u=document.createElement("img");i.textContent=l(t[4]),m.textContent=e[4]+" °C",a.textContent=n[4]+" °C",u.src=d(o[4]),c.appendChild(i),c.appendChild(m),c.appendChild(a),c.appendChild(u)}(o,e,n,c),function(t,e,n,o){const c=document.getElementById("day-6"),i=document.createElement("h4"),m=document.createElement("h2"),a=document.createElement("h3"),u=document.createElement("img");i.textContent=l(t[5]),m.textContent=e[5]+" °C",a.textContent=n[5]+" °C",u.src=d(o[5]),c.appendChild(i),c.appendChild(m),c.appendChild(a),c.appendChild(u)}(o,e,n,c),function(t,e,n,o){const c=document.getElementById("day-7"),i=document.createElement("h4"),m=document.createElement("h2"),a=document.createElement("h3"),u=document.createElement("img");i.textContent=l(t[6]),m.textContent=e[6]+" °C",a.textContent=n[6]+" °C",u.src=d(o[6]),c.appendChild(i),c.appendChild(m),c.appendChild(a),c.appendChild(u)}(o,e,n,c)}(o),console.log(o),o}const a=document.getElementById("curr-weather");function l(t){const e=t.split("-")[2],n=t.split("-")[1],o=t.split("-")[0];return`${e[0]}${e[1]}/${n}/${o}`}const u=[1,2,3],r=[45,48],s=[51,53,55,56,57,61,63,65,66,67,80,81,82],p=[71,73,75,77,85,86],C=[95,96,99,"*"],y=document.getElementById("err-text");async function h(t){const e=await fetch(`https://geocoding-api.open-meteo.com/v1/search?name=${t}&count=1&language=it&format=json`),n=await e.json();return n.results||(y.textContent="Location Not Found"),async function(t){const e=t.results[0].latitude,n=t.results[0].longitude;await m(e,n)}(n),async function(t){const e=document.getElementById("location-name"),n=document.getElementById("location-region"),o=document.getElementById("location-country");let c=t.results[0].admin1;c||(c=""),e.textContent=t.results[0].name,n.textContent=c,o.textContent=t.results[0].country}(n),n}function x(t){return(9*t/5+32).toFixed(1)}function g(t){return(5*(t-32)/9).toFixed(1)}h("Bergamo");const E=document.getElementById("location"),I=document.getElementById("search"),f=document.getElementById("err-text"),B=document.getElementById("imperial");E.addEventListener("keypress",(t=>{const e=E.value;"Enter"===t.key&&(""===e?f.textContent="Invalid input":(h(e),E.value="",f.textContent="",B.textContent="Imperial"))})),I.addEventListener("click",(()=>{const t=E.value;""===t?f.textContent="Invalid Input":(h(t),E.value="",f.textContent="",B.textContent="Imperial")})),B.addEventListener("click",(t=>{"Imperial"===B.textContent?(B.textContent="Metric",async function(){const t=document.getElementById("temp-celsius"),e=document.getElementById("feels-like"),n=document.getElementById("wind-speed"),o=document.getElementById("max-temp"),c=document.getElementById("min-temp");let d=t.textContent.split(" °C")[0],i=e.textContent.split(" °C")[0],m=n.textContent.split(" Km/h")[0],a=o.textContent.split(" °C")[0],l=c.textContent.split(" °C")[0];t.textContent=x(d)+" °F",e.textContent=x(i)+" °F",n.textContent=(.621371192*m).toFixed(1)+" Mph",o.textContent=x(a)+" °F",c.textContent=x(l)+" °F"}()):(B.textContent="Imperial",async function(){const t=document.getElementById("temp-celsius"),e=document.getElementById("feels-like"),n=document.getElementById("wind-speed"),o=document.getElementById("max-temp"),c=document.getElementById("min-temp");let d=t.textContent.split(" °F")[0],i=e.textContent.split(" °F")[0],m=n.textContent.split(" Mph")[0],a=o.textContent.split(" °F")[0],l=c.textContent.split(" °F")[0];t.textContent=g(d)+" °C",e.textContent=g(i)+" °C",n.textContent=(1.6*m).toFixed(1)+" Km/h",o.textContent=g(a)+" °C",c.textContent=g(l)+" °C"}())}))})();