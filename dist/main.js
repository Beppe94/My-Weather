(()=>{"use strict";const t=[1,2,3],e=[45,48],n=[51,53,55,56,57,61,63,65,66,67,80,81,82],o=[71,73,75,77,85,86],c=[95,96,99,"*"];function m(m){let a;return 0===m?a="icons/sunny.svg":t.includes(m)?a="icons/cloudyDay.svg":e.includes(m)?a="icons/foggy.svg":n.includes(m)?a="icons/rainy.svg":o.includes(m)?a="icons/snowy.svg":c.includes(m)&&(a="icons/thunderstorm.svg"),a}function a(t){const e=t.current_weather.time.split("T")[1].split(":")[0];return"00"===e?"24":"0"===e[0]?e[1]:e}async function d(t,e){const n=await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${t}&longitude=${e}&hourly=apparent_temperature,relativehumidity_2m&daily=weathercode,temperature_2m_max,temperature_2m_min,precipitation_probability_max,windspeed_10m_max&current_weather=true&timezone=auto`),o=await n.json();var c,d;return async function(t){const e=document.getElementById("curr-date");e.textContent="";const n=document.createElement("img"),o=document.createElement("h3");n.src="icons/calendar.png",o.textContent=i(t.current_weather.time),e.appendChild(n),e.appendChild(o),l.appendChild(e)}(o),async function(t){const e=document.getElementById("curr-temp"),n=document.createElement("img"),o=document.createElement("h2");let c=await t.current_weather.weathercode,m=await t.current_weather.is_day;0===c&&1===m?(o.textContent="Clear Sky",n.src="icons/sunny.svg"):0===c&&0===m?(o.textContent="Clear Sky",n.src="icons/night.svg"):s.includes(c)&&1===m?(o.textContent="Scattered Clouds",n.src="icons/cloudyDay.svg"):s.includes(c)&&0===m?(o.textContent="Scattered Clouds",n.src="icons/cloudyNight.svg"):r.includes(c)?(o.textContent="Foggy",n.src="icons/foggy.svg"):u.includes(c)?(o.textContent="Rainy",n.src="icons/rainy.svg"):p.includes(c)?(o.textContent="Snowy",n.src="icons/snowy.svg"):C.includes(c)&&(o.textContent="Thunderstorm",n.src="icons/thunderstorm.svg"),e.appendChild(o),e.appendChild(n),l.appendChild(e)}(o),function(t){const e=document.getElementById("curr-temp");e.textContent="";const n=document.createElement("h1");n.id="temp-celsius",n.textContent=t.current_weather.temperature+" °C",e.appendChild(n),l.appendChild(e)}(o),c=a(o),d=o,document.getElementById("feels-like").textContent=`${d.hourly.apparent_temperature[c]} °C`,function(t){const e=document.getElementById("wind-speed");let n=t.current_weather.windspeed;e.textContent=`${n} Km/h`}(o),function(t){document.getElementById("rain-prob").textContent=`${t.daily.precipitation_probability_max[0]} %`}(o),function(t,e){document.getElementById("humidity").textContent=`${e.hourly.relativehumidity_2m[t]} %`}(a(o),o),function(t){document.getElementById("max-temp").textContent=`${t.daily.temperature_2m_max[0]} °C`}(o),function(t){document.getElementById("min-temp").textContent=`${t.daily.temperature_2m_min[0]} °C`}(o),async function(t){const e=await t.daily.temperature_2m_max,n=await t.daily.temperature_2m_min,o=await t.daily.time,c=await t.daily.weathercode;!function(t,e,n,o){const c=document.getElementById("day-2"),a=document.createElement("h4"),d=document.createElement("h2"),l=document.createElement("h3"),s=document.createElement("img");d.className="forecast-max-temp",l.className="forecast-min-temp",a.textContent=i(t[1]),d.textContent=e[1]+" °C",l.textContent=n[1]+" °C",s.src=m(o[1]),c.appendChild(a),c.appendChild(d),c.appendChild(l),c.appendChild(s)}(o,e,n,c),function(t,e,n,o){const c=document.getElementById("day-3"),a=document.createElement("h4"),d=document.createElement("h2"),l=document.createElement("h3"),s=document.createElement("img");d.className="forecast-max-temp",l.className="forecast-min-temp",a.textContent=i(t[2]),d.textContent=e[2]+" °C",l.textContent=n[2]+" °C",s.src=m(o[2]),c.appendChild(a),c.appendChild(d),c.appendChild(l),c.appendChild(s)}(o,e,n,c),function(t,e,n,o){const c=document.getElementById("day-4"),a=document.createElement("h4"),d=document.createElement("h2"),l=document.createElement("h3"),s=document.createElement("img");d.className="forecast-max-temp",l.className="forecast-min-temp",a.textContent=i(t[3]),d.textContent=e[3]+" °C",l.textContent=n[3]+" °C",s.src=m(o[3]),c.appendChild(a),c.appendChild(d),c.appendChild(l),c.appendChild(s)}(o,e,n,c),function(t,e,n,o){const c=document.getElementById("day-5"),a=document.createElement("h4"),d=document.createElement("h2"),l=document.createElement("h3"),s=document.createElement("img");d.className="forecast-max-temp",l.className="forecast-min-temp",a.textContent=i(t[4]),d.textContent=e[4]+" °C",l.textContent=n[4]+" °C",s.src=m(o[4]),c.appendChild(a),c.appendChild(d),c.appendChild(l),c.appendChild(s)}(o,e,n,c),function(t,e,n,o){const c=document.getElementById("day-6"),a=document.createElement("h4"),d=document.createElement("h2"),l=document.createElement("h3"),s=document.createElement("img");d.className="forecast-max-temp",l.className="forecast-min-temp",a.textContent=i(t[5]),d.textContent=e[5]+" °C",l.textContent=n[5]+" °C",s.src=m(o[5]),c.appendChild(a),c.appendChild(d),c.appendChild(l),c.appendChild(s)}(o,e,n,c),function(t,e,n,o){const c=document.getElementById("day-7"),a=document.createElement("h4"),d=document.createElement("h2"),l=document.createElement("h3"),s=document.createElement("img");d.className="forecast-max-temp",l.className="forecast-min-temp",a.textContent=i(t[6]),d.textContent=e[6]+" °C",l.textContent=n[6]+" °C",s.src=m(o[6]),c.appendChild(a),c.appendChild(d),c.appendChild(l),c.appendChild(s)}(o,e,n,c)}(o),console.log(o),o}const l=document.getElementById("curr-weather");function i(t){const e=t.split("-")[2],n=t.split("-")[1],o=t.split("-")[0];return`${e[0]}${e[1]}/${n}/${o}`}const s=[1,2,3],r=[45,48],u=[51,53,55,56,57,61,63,65,66,67,80,81,82],p=[71,73,75,77,85,86],C=[95,96,99,"*"],x=document.getElementById("err-text");async function y(t){const e=await fetch(`https://geocoding-api.open-meteo.com/v1/search?name=${t}&count=1&language=it&format=json`),n=await e.json();return n.results||(x.textContent="Location Not Found"),async function(t){const e=t.results[0].latitude,n=t.results[0].longitude;await d(e,n)}(n),async function(t){const e=document.getElementById("location-name"),n=document.getElementById("location-region"),o=document.getElementById("location-country");let c=t.results[0].admin1;c||(c=""),e.textContent=t.results[0].name,n.textContent=c,o.textContent=t.results[0].country}(n),n}function h(t){return(9*t/5+32).toFixed(1)}function g(t){return(5*(t-32)/9).toFixed(1)}y("Bergamo");const E=document.getElementById("location"),f=document.getElementById("search"),I=document.getElementById("err-text"),B=document.getElementById("imperial");E.addEventListener("keypress",(t=>{const e=E.value;"Enter"===t.key&&(""===e?I.textContent="Invalid input":(y(e),E.value="",I.textContent="",B.textContent="Imperial"))})),f.addEventListener("click",(()=>{const t=E.value;""===t?I.textContent="Invalid Input":(y(t),E.value="",I.textContent="",B.textContent="Imperial")})),B.addEventListener("click",(t=>{"Imperial"===B.textContent?(B.textContent="Metric",async function(){const t=document.getElementById("temp-celsius"),e=document.getElementById("feels-like"),n=document.getElementById("wind-speed"),o=document.getElementById("max-temp"),c=document.getElementById("min-temp"),m=document.querySelectorAll(".forecast-max-temp"),a=document.querySelectorAll(".forecast-min-temp");let d=t.textContent.split(" °C")[0],l=e.textContent.split(" °C")[0],i=n.textContent.split(" Km/h")[0],s=o.textContent.split(" °C")[0],r=c.textContent.split(" °C")[0];t.textContent=h(d)+" °F",e.textContent=h(l)+" °F",n.textContent=(.621371192*i).toFixed(1)+" Mph",o.textContent=h(s)+" °F",c.textContent=h(r)+" °F",m.forEach((t=>{let e=t.textContent.split(" °C")[0];t.textContent=h(e)+" °F"})),a.forEach((t=>{let e=t.textContent.split(" °C")[0];t.textContent=h(e)+" °F"}))}()):(B.textContent="Imperial",async function(){const t=document.getElementById("temp-celsius"),e=document.getElementById("feels-like"),n=document.getElementById("wind-speed"),o=document.getElementById("max-temp"),c=document.getElementById("min-temp"),m=document.querySelectorAll(".forecast-max-temp"),a=document.querySelectorAll(".forecast-min-temp");let d=t.textContent.split(" °F")[0],l=e.textContent.split(" °F")[0],i=n.textContent.split(" Mph")[0],s=o.textContent.split(" °F")[0],r=c.textContent.split(" °F")[0];m.forEach((t=>{let e=t.textContent.split(" °F")[0];t.textContent=g(e)+" °C"})),a.forEach((t=>{let e=t.textContent.split(" °F")[0];t.textContent=g(e)+" °C"})),t.textContent=g(d)+" °C",e.textContent=g(l)+" °C",n.textContent=(1.6*i).toFixed(1)+" Km/h",o.textContent=g(s)+" °C",c.textContent=g(r)+" °C"}())}))})();