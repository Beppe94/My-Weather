(()=>{"use strict";const t=document.getElementById("curr-weather");async function e(e){const n=await fetch(`https://geocoding-api.open-meteo.com/v1/search?name=${e}&count=1&language=it&format=json`),c=await n.json();!async function(t){const e=document.getElementById("location-name"),n=document.getElementById("location-country");let c=t.results[0].admin1;c||(c=""),e.textContent=t.results[0].name,n.textContent=c+" "+t.results[0].country}(c),async function(e){const n=e.results[0].latitude,c=e.results[0].longitude;await async function(e,n){const c=await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${e}0&longitude=${n}&hourly=temperature_2m,relativehumidity_2m,apparent_temperature,precipitation_probability,precipitation,rain,showers,snowfall,snow_depth,visibility,windspeed_10m,windspeed_80m,winddirection_10m&current_weather=true&start_date=2023-04-16&end_date=2023-04-22`),o=await c.json();return console.log(o),async function(e){const n=document.getElementById("curr-date");n.textContent="";const c=document.createElement("img"),o=document.createElement("h2");c.src="icons/calendar.png",o.textContent=function(t){const e=t.split("-")[2],n=t.split("-")[1],c=t.split("-")[0];return`${e[0]}${e[1]}/${n}/${c}`}(e.current_weather.time),n.appendChild(c),n.appendChild(o),t.appendChild(n)}(o),async function(e){const n=document.getElementById("curr-temp");n.textContent="";const c=document.createElement("h2"),o=document.createElement("img");o.src="icons/thermostat.png",c.textContent=e.current_weather.temperature+" Â°C",n.appendChild(o),n.appendChild(c),t.appendChild(n)}(o),async function(e){const n=document.getElementById("curr-temp"),c=document.createElement("img");let o=await e.current_weather.weathercode,a=await e.current_weather.is_day;0==o&&0==a?c.src="icons/night.png":1==o||2==o||3==o&&1==a?c.src="icons/cloudyDay.png":1==o&&0==a&&(c.src="icons/cloudyNight.png"),n.appendChild(c),t.appendChild(n),console.log(o,a)}(o),o}(n,c)}(c)}const n=document.getElementById("location"),c=document.getElementById("search");n.addEventListener("keypress",(t=>{"Enter"==t.key&&e(n.value)})),c.addEventListener("click",(()=>{e(n.value)}))})();