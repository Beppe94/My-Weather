(()=>{"use strict";function t(t){const e=t.current_weather.time.split("T")[1].split(":")[0];return"00"===e?"24":"0"===e[0]?e[1]:e}async function e(e,r){const l=await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${e}&longitude=${r}&hourly=temperature_2m,apparent_temperature,relativehumidity_2m&daily=temperature_2m_max,temperature_2m_min,precipitation_probability_max,windspeed_10m_max&current_weather=true&timezone=auto`),s=await l.json();var a,u;return async function(t){const e=document.getElementById("curr-date");e.textContent="";const o=document.createElement("img"),c=document.createElement("h3");o.src="icons/calendar.png",c.textContent=function(t){const e=t.split("-")[2],n=t.split("-")[1],o=t.split("-")[0];return`${e[0]}${e[1]}/${n}/${o}`}(t.current_weather.time),e.appendChild(o),e.appendChild(c),n.appendChild(e)}(s),async function(t){const e=document.getElementById("curr-temp"),r=document.createElement("img"),l=document.createElement("h2");let s=await t.current_weather.weathercode,a=await t.current_weather.is_day;0===s&&1===a?(l.textContent="Clear Sky",r.src="icons/sunny.svg"):0===s&&0===a?(l.textContent="Clear Sky",r.src="icons/night.svg"):o.includes(s)&&1===a?(l.textContent="Scattered Clouds",r.src="icons/cloudyDay.svg"):o.includes(s)&&0===a?(l.textContent="Scattered Clouds",r.src="icons/cloudyNight.svg"):c.includes(s)?(l.textContent="Foggy",r.src="icons/foggy.svg"):i.includes(s)?(l.textContent="Rainy",r.src="icons/rainy.svg"):m.includes(s)?(l.textContent="Snowy",r.src="icons/snowy.svg"):d.includes(s)&&(l.textContent="Thunderstorm",r.src="icons/thunderstorm.svg"),e.appendChild(l),e.appendChild(r),n.appendChild(e)}(s),function(t){const e=document.getElementById("curr-temp");e.textContent="";const o=document.createElement("h1");o.id="temp-celsius",o.textContent=t.current_weather.temperature+" °C",e.appendChild(o),n.appendChild(e)}(s),a=t(s),u=s,document.getElementById("feels-like").textContent=`${u.hourly.apparent_temperature[a]} °C`,function(t){const e=document.getElementById("wind-speed");let n=t.current_weather.windspeed;e.textContent=`${n} Km/h`}(s),function(t){document.getElementById("rain-prob").textContent=`${t.daily.precipitation_probability_max[0]} %`}(s),function(t,e){document.getElementById("humidity").textContent=`${e.hourly.relativehumidity_2m[t]} %`}(t(s),s),function(t){document.getElementById("max-temp").textContent=`${t.daily.temperature_2m_max[0]} °C`}(s),function(t){document.getElementById("min-temp").textContent=`${t.daily.temperature_2m_min[0]} °C`}(s),console.log(s),s}const n=document.getElementById("curr-weather"),o=[1,2,3],c=[45,48],i=[51,53,55,56,57,61,63,65,66,67,80,81,82],m=[71,73,75,77,85,86],d=[95,96,99,"*"];e(45.7,9.66);const r=document.getElementById("err-text");async function l(t){const n=await fetch(`https://geocoding-api.open-meteo.com/v1/search?name=${t}&count=1&language=it&format=json`),o=await n.json();return o.results||(r.textContent="Location Not Found"),async function(t){const n=t.results[0].latitude,o=t.results[0].longitude;await e(n,o)}(o),async function(t){const e=document.getElementById("location-name"),n=document.getElementById("location-region"),o=document.getElementById("location-country");let c=t.results[0].admin1;c||(c=""),e.textContent=t.results[0].name,n.textContent=c,o.textContent=t.results[0].country}(o),o}function s(t){return(9*t/5+32).toFixed(1)}function a(t){return(5*(t-32)/9).toFixed(1)}l("Bergamo");const u=document.getElementById("location"),p=document.getElementById("search"),C=document.getElementById("err-text"),x=document.getElementById("imperial");u.addEventListener("keypress",(t=>{const e=u.value;"Enter"===t.key&&(""===e?C.textContent="Invalid input":(l(e),u.value="",C.textContent="",x.textContent="Imperial"))})),p.addEventListener("click",(()=>{const t=u.value;""===t?C.textContent="Invalid Input":(l(t),u.value="",C.textContent="",x.textContent="Imperial")})),x.addEventListener("click",(t=>{"Imperial"===x.textContent?(x.textContent="Metric",async function(){const t=document.getElementById("temp-celsius"),e=document.getElementById("feels-like"),n=document.getElementById("wind-speed"),o=document.getElementById("max-temp"),c=document.getElementById("min-temp");let i=t.textContent.split(" °C")[0],m=e.textContent.split(" °C")[0],d=n.textContent.split(" Km/h")[0],r=o.textContent.split(" °C")[0],l=c.textContent.split(" °C")[0];t.textContent=s(i)+" °F",e.textContent=s(m)+" °F",n.textContent=(.621371192*d).toFixed(1)+" Mph",o.textContent=s(r)+" °F",c.textContent=s(l)+" °F"}()):(x.textContent="Imperial",async function(){const t=document.getElementById("temp-celsius"),e=document.getElementById("feels-like"),n=document.getElementById("wind-speed"),o=document.getElementById("max-temp"),c=document.getElementById("min-temp");let i=t.textContent.split(" °F")[0],m=e.textContent.split(" °F")[0],d=n.textContent.split(" Mph")[0],r=o.textContent.split(" °F")[0],l=c.textContent.split(" °F")[0];t.textContent=a(i)+" °C",e.textContent=a(m)+" °C",n.textContent=(1.6*d).toFixed(1)+" Km/h",o.textContent=a(r)+" °C",c.textContent=a(l)+" °C"}())}))})();